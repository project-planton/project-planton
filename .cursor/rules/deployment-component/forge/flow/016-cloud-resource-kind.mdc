---
alwaysApply: false
---
RULE NUMBER
016

TITLE
Forge: Add new cloud resource to cloud_resource_kind.proto enum

ROLE
You are the PlantonCloud Code Partner working inside the developer's local workspace in Cursor. This rule ensures that newly forged cloud resources are properly registered in the `cloud_resource_kind.proto` enum with correct provider ranges and metadata.

SCOPE
- Add new enum entry to `apis/project/planton/shared/cloudresourcekind/cloud_resource_kind.proto`
- Determine correct enum value based on provider range
- Generate appropriate id_prefix following naming conventions
- Do not modify other forge-generated files

PROVIDER RANGES
The cloud_resource_kind.proto uses the following numeric ranges:
- Test/dev/custom: 1-49
- SaaS platforms: 50-199
- AWS: 200-399
- Azure: 400-599
- GCP: 600-799
- Kubernetes: 800-999
- DigitalOcean: 1200-1499
- Civo: 1500-1799
- Cloudflare: 1800-2099

ID PREFIX PATTERNS
- AWS: typically "aws" prefix + 2-6 char abbreviation (e.g., "awsvpc", "ecr", "s3bkt")
- Azure: typically "az" prefix + 2-6 char abbreviation (e.g., "aks", "azdns", "azkv")
- GCP: typically "gcp" prefix + 3-7 char abbreviation (e.g., "gcpdns", "gcpsql", "gcpcert")
- Kubernetes: descriptive + "k8s" suffix (e.g., "k8sms", "pgk8s", "cmk8s")
- DigitalOcean: "do" prefix + abbreviation (e.g., "doapp", "dodns", "docert")
- Civo: "ci" prefix + abbreviation (e.g., "cidns", "cidb", "cicert")
- Cloudflare: "cf" prefix + abbreviation (e.g., "cfdns", "cfkvn", "cfr2b")

SEQUENTIAL STEPS
1) Identify: Determine the provider and kind name from the resource being forged
   - Provider from directory path (e.g., `provider/gcp/gcpcertmanagercert` → gcp)
   - Kind name from directory name in PascalCase (e.g., `gcpcertmanagercert` → GcpCertManagerCert)

2) Find Next Enum Value:
   - Read `apis/project/planton/shared/cloudresourcekind/cloud_resource_kind.proto`
   - Identify provider's range from PROVIDER RANGES above
   - Scan existing entries in that range to find the highest used number
   - Next value = highest + 1
   - Ensure it's within the provider's range

3) Generate ID Prefix:
   - Follow the naming pattern for the provider from ID PREFIX PATTERNS above
   - Keep it short (3-7 characters) and descriptive
   - Check for uniqueness against existing id_prefix values
   - Examples:
     * GcpCertManagerCert → "gcpcert"
     * AwsSecretsManager → "awssm"
     * AzureKeyVault → "azkv"

4) Insert Enum Entry:
   - Add the new enum value in numerical order within the provider's section
   - Use the format:
     ```proto
     <KindName> = <number> [(kind_meta) = {
       provider: <provider_name>
       version: v1
       id_prefix: "<generated_prefix>"
     }];
     ```
   - For Kubernetes resources, add kubernetes_meta if applicable
   - Maintain consistent indentation (2 spaces)

5) Validation:
   - Verify no duplicate enum values
   - Verify no duplicate id_prefix values
   - Verify enum value is in correct provider range
   - Verify formatting matches existing entries

SUCCESS
- New enum entry added to cloud_resource_kind.proto
- Enum value is unique and in correct provider range
- ID prefix is unique and follows naming convention
- Entry is inserted in numerical order
- Formatting matches existing entries
- File is syntactically correct

OUTPUT
- Confirm the added enum entry with its number and id_prefix
- Show the provider range and position within that range
- Example: "Added GcpCertManagerCert = 619 with id_prefix 'gcpcert' (GCP range: 600-799)"

NOTES
- This rule should be run after api.proto is created (rule 005)
- The enum number should never be changed once assigned
- The id_prefix should be globally unique across all providers
- If the provider's range is full, alert the developer to expand the range
