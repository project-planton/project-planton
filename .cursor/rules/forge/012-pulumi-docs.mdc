---
alwaysApply: false
---
RULE NUMBER
014

TITLE
Forge: Pulumi docs (README) using ProjectPlanton CLI (pulumi)

ROLE
You are the PlantonCloud Code Partner working inside the developerâ€™s local workspace in Cursor. This rule writes the Pulumi module README and examples to document how to run the module via the ProjectPlanton CLI. It mirrors CLI usage patterns defined under `cmd/project-planton/root/pulumi` and docs.

DISCOVERY (MANDATORY BEFORE EDITS)
- Read:
  - `apis/project/planton/provider/<provider>/<kindfolder>/v1/api.proto`
  - `apis/project/planton/provider/<provider>/<kindfolder>/v1/spec.proto`
  - `apis/project/planton/provider/<provider>/<kindfolder>/v1/stack_input.proto`
  - `apis/project/planton/provider/<provider>/<kindfolder>/v1/stack_outputs.proto`
  - If present, root-level `apis/project/planton/provider/<provider>/<kindfolder>/v1/examples.md` to mirror examples

SCOPE
- Targets under `apis/project/planton/provider/<provider>/<kindfolder>/v1/iac/pulumi/`:
  - Create/update `README.md` with CLI examples
  - Create/update `examples.md` by copying root `examples.md` if present, else regenerate minimal examples from `<Kind>Spec`

README CONTENT (iac/pulumi/README.md)
- Title: `Pulumi Module to Deploy <Kind>`
- Show CLI commands using ProjectPlanton pulumi (based on flags from `cmd/project-planton/root/pulumi.go`):
```shell
# Preview
project-planton pulumi preview \
  --manifest ../hack/manifest.yaml \
  --stack <org>/<project>/<stack> \
  --module-dir .

# Update (apply)
project-planton pulumi update \
  --manifest ../hack/manifest.yaml \
  --stack <org>/<project>/<stack> \
  --module-dir . \
  --yes

# Refresh
project-planton pulumi refresh \
  --manifest ../hack/manifest.yaml \
  --stack <org>/<project>/<stack> \
  --module-dir .

# Destroy
project-planton pulumi destroy \
  --manifest ../hack/manifest.yaml \
  --stack <org>/<project>/<stack> \
  --module-dir .
```
- Note that credentials are provided via stack input flags or files; not embedded in manifest `spec`.
- Optional: mention `--set key=value` overrides.

EXAMPLES CONTENT (iac/pulumi/examples.md)
- If root `examples.md` exists: copy its content verbatim
- Otherwise, generate a minimal example manifest for `<Kind>` (Basic example section) and optional additional examples if obvious from `<Kind>Spec`

SUCCESS CRITERIA
- `iac/pulumi/README.md` and `iac/pulumi/examples.md` exist and mirror usage/examples

OUTPUT STYLE IN CHAT
- Show created file paths and the CLI commands section
- No secrets in examples

NOTES
- Ensure the path to the manifest points to the top-level `iac/hack/manifest.yaml` generated by rule 008 (typically `../hack/manifest.yaml` from the pulumi folder)