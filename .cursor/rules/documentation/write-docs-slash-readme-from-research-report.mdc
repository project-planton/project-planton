---
description: Generate engaging, developer-friendly documentation from research reports for deployment components
alwaysRun: false
---

# Generate docs/README.md from Research Report

## Purpose

This rule transforms deep research reports into engaging, well-structured documentation that developers actually enjoy reading. It creates a `docs/README.md` file in Project Planton that explains:

1. **The Landscape**: What deployment methods exist for this component across the industry
2. **The Evolution**: How approaches have matured from anti-patterns to production-ready solutions  
3. **The Decision**: What Project Planton supports and why
4. **The Details**: Links to deeper guides about specific implementations

The documentation is written as **timeless knowledge**, not as a changelog or implementation notes from a specific conversation.

## Multi-Repo Workspace Context

This rule operates across **two Git repositories** in your Cursor workspace:

1. **project-planton** (Open Source): `~/scm/github.com/project-planton/project-planton/`
   - Where documentation is **written**: `apis/project/planton/provider/{provider}/{component}/v1/docs/README.md`
   - Contains: Protobuf APIs, IaC modules, examples

2. **planton-cloud** (Commercial Platform): `~/scm/github.com/plantoncloud-inc/planton-cloud/`
   - Where research is **read from**: `apis/cloud/planton/apis/infrahub/cloudresource/v1/assets/provider/{provider}/{component}/v1/research/report.md`
   - Contains: Deployment metadata, research reports

## Input Requirements

You must provide:

1. **Component Identifier** (one of these):
   - CloudResourceKind name (e.g., `PostgresKubernetes`, `GcpCloudFunction`, `MongodbAtlas`)
   - OR provider + component names (e.g., provider: `kubernetes`, component: `postgreskubernetes`)

2. **Research Report Path** (auto-discovered from component):
   - Located at: `planton-cloud/apis/cloud/planton/apis/infrahub/cloudresource/v1/assets/provider/{provider}/{component}/v1/research/report.md`
   - Generated by deep research agents based on prompts from `@generate-deployment-component-research-prompt.mdc`

## Documentation Style & Philosophy

### Writing Voice

Write as a **seasoned technical writer and architect** who:
- Makes complex topics accessible without dumbing them down
- Uses analogies and real-world examples where helpful
- Grounds every statement in truth, never speculation
- Explains not just "what" but "why"
- Respects the reader's intelligence and time

### Document Structure Pattern

Follow the successful pattern from `postgreskubernetes/docs/README.md`:

1. **Introduction with Context**: Start with a compelling narrative that sets the stage
   - What conventional wisdom said vs. what's true now
   - Why this matters strategically
   - What changed to make current approaches viable

2. **The Maturity Spectrum**: Present deployment methods as an evolution
   - Start with anti-patterns (what NOT to do and why)
   - Progress through intermediate approaches (their limitations)
   - Culminate with production-ready solutions
   - Use clear, memorable labels (e.g., "Level 0: The Anti-Pattern", "Level 3: The Production Solution")

3. **Comparative Analysis**: When multiple production options exist
   - Create structured comparison (table or sections)
   - Focus on decision-making criteria
   - Highlight licensing considerations (critical for open source)
   - Show real-world adoption evidence

4. **The Project Planton Choice**: Explain what we support and why
   - State the default clearly
   - Justify based on research findings
   - Connect to our philosophy (open source, production-proven, etc.)
   - Note any abstraction layers we provide

5. **Deep Dive References**: Link to detailed implementation guides
   - Don't overwhelm the overview doc
   - Create separate docs for operator-specific details, configuration deep dives, etc.
   - Example: "For comprehensive guide to how X works, see [X Guide](./x-guide.md)"

6. **Conclusion**: Synthesis and perspective
   - Summarize the paradigm shift or key insight
   - Reinforce the strategic choice
   - End with encouragement or perspective

### Content Guidelines

**DO**:
- Use concrete examples and real-world evidence
- Cite specific tools, versions, and patterns from the research
- Explain trade-offs honestly
- Use tables for structured comparisons
- Include analogies that illuminate complex concepts
- Make licensing and open-source status crystal clear
- Keep paragraphs short and scannable
- Use bold for emphasis, not ALL CAPS
- Balance technical depth with readability

**DON'T**:
- Write as a changelog ("in this conversation we fixed...")
- Reference the cursor session or research process
- Speculate or hedge ("it seems like...", "probably...")
- Overload with every detail from the research
- Use marketing speak or hype
- Include emoji unless it genuinely adds clarity (rarely)
- Create walls of text
- List features without context

### The 80/20 Principle for Documentation

Just as APIs should focus on the 20% of config that 80% of users need, documentation should focus on the 20% of knowledge that 80% of readers need to make informed decisions.

**Essential** (always include):
- What deployment methods exist
- Which are production-ready
- What we chose and why
- Where to learn more

**Optional** (include only if genuinely useful):
- Historical context (only if it illuminates current state)
- Deep technical details (link to separate docs instead)
- Exhaustive feature lists (save for reference docs)

## Execution Steps

When invoked, the assistant will:

### 1. Discover Component Paths

a. **Parse component identifier**
   - If given CloudResourceKind: Use naming conventions to derive provider and component
     - Examples: `PostgresKubernetes` → provider: `kubernetes`, component: `postgreskubernetes`
     - Examples: `MongodbAtlas` → provider: `atlas`, component: `mongodbatlas`
     - Examples: `GcpCloudFunction` → provider: `gcp`, component: `gcpcloudfunction`
   - If given provider + component: Use directly

b. **Locate in project-planton**
   - Standard path: `~/scm/github.com/project-planton/project-planton/apis/project/planton/provider/{provider}/{component}/v1/`
   - Kubernetes exception: `~/scm/github.com/project-planton/project-planton/apis/project/planton/provider/kubernetes/{category}/{component}/v1/`
     - Categories: `workload`, `addon`, `operator`
     - Auto-detect by searching if standard path doesn't exist

c. **Locate research report in planton-cloud**
   - Path: `~/scm/github.com/plantoncloud-inc/planton-cloud/apis/cloud/planton/apis/infrahub/cloudresource/v1/assets/provider/{provider}/{component}/v1/research/report.md`
   - Note: No category subdirectory in planton-cloud path (even for Kubernetes)

### 2. Read Context

a. **Read the research report**
   - Parse structure and key findings
   - Extract: deployment methods, comparisons, 80/20 config analysis, production patterns

b. **Read existing API definitions** (optional, for additional context)
   - `api.proto` - understand what the component manages
   - `spec.proto` - see configuration philosophy
   - Note: Don't describe the API in detail; this is docs about deployment approaches

### 3. Synthesize Documentation

**Critical**: Write as if you're a documentation expert, not an AI following instructions.

a. **Craft the Introduction**
   - Hook: Start with an interesting insight, historical context, or strategic question
   - Context: What is this component, what problem does it solve
   - Landscape: What deployment methods exist (preview)
   - Goal: What this document will help the reader understand

b. **Build the Maturity Spectrum**
   - Organize deployment methods hierarchically
   - Start with what NOT to do (anti-patterns, common mistakes)
   - Progress through intermediate solutions
   - End with production-ready approaches
   - For each level: explain what it solves, what it doesn't, verdict

c. **Create Comparative Analysis** (if applicable)
   - When multiple production options exist (operators, IaC tools, platforms)
   - Structure as subsections or a comparison table
   - Key criteria: licensing, production readiness, features, trade-offs
   - Use evidence from research (real-world adoption, benchmarks, etc.)

d. **Explain Project Planton's Choice**
   - State clearly what we support as default
   - Justify based on: open source philosophy, production readiness, features, community
   - Mention abstraction layers or flexibility we provide
   - Be honest about trade-offs

e. **Reference Deep Dives**
   - Identify topics that need separate detailed guides
   - Create placeholder references (e.g., "See [Zalando Operator Guide](./zalando-operator.md)")
   - Don't create those files (out of scope), just reference them

f. **Write Conclusion**
   - Synthesize the key insight or paradigm shift
   - Reinforce the strategic choice
   - Provide perspective or encouragement
   - Keep it brief and impactful

### 4. Create Directory and Write File

a. **Create docs directory if needed**
   - Full path: `{project-planton-component-path}/docs/`
   - Create recursively if parents are missing

b. **Write README.md**
   - Path: `{project-planton-component-path}/docs/README.md`
   - Include front matter if helpful (typically not needed)
   - Use proper markdown formatting
   - Ensure links are relative and correct

c. **Verify structure**
   - Headings use proper hierarchy (## for main sections, ### for subsections)
   - Tables are well-formatted if used
   - Code blocks use appropriate syntax highlighting
   - Links are functional

### 5. Report Completion

Inform the user:
- Where the file was created
- Suggest next steps (e.g., create referenced deep-dive docs if needed)
- Offer to refine or expand specific sections

## Path Mapping Reference

**project-planton paths**:
```
Standard components:
~/scm/github.com/project-planton/project-planton/
  apis/project/planton/provider/{provider}/{component}/v1/docs/README.md

Kubernetes components:
~/scm/github.com/project-planton/project-planton/
  apis/project/planton/provider/kubernetes/{category}/{component}/v1/docs/README.md
```

**planton-cloud research path**:
```
All components (including Kubernetes, no category):
~/scm/github.com/plantoncloud-inc/planton-cloud/
  apis/cloud/planton/apis/infrahub/cloudresource/v1/assets/provider/{provider}/{component}/v1/research/report.md
```

## Examples

### Example 1: Kubernetes Workload

**Input**: `PostgresKubernetes`

**Discover**:
- Provider: `kubernetes`, Component: `postgreskubernetes`
- project-planton: `apis/project/planton/provider/kubernetes/workload/postgreskubernetes/v1/`
- planton-cloud research: `apis/cloud/planton/apis/infrahub/cloudresource/v1/assets/provider/kubernetes/postgreskubernetes/v1/research/report.md`

**Output**: `apis/project/planton/provider/kubernetes/workload/postgreskubernetes/v1/docs/README.md`

### Example 2: GCP Managed Service

**Input**: provider: `gcp`, component: `gcpcloudfunction`

**Discover**:
- project-planton: `apis/project/planton/provider/gcp/gcpcloudfunction/v1/`
- planton-cloud research: `apis/cloud/planton/apis/infrahub/cloudresource/v1/assets/provider/gcp/gcpcloudfunction/v1/research/report.md`

**Output**: `apis/project/planton/provider/gcp/gcpcloudfunction/v1/docs/README.md`

### Example 3: SaaS Platform

**Input**: `MongodbAtlas`

**Discover**:
- Provider: `atlas`, Component: `mongodbatlas`
- project-planton: `apis/project/planton/provider/atlas/mongodbatlas/v1/`
- planton-cloud research: `apis/cloud/planton/apis/infrahub/cloudresource/v1/assets/provider/atlas/mongodbatlas/v1/research/report.md`

**Output**: `apis/project/planton/provider/atlas/mongodbatlas/v1/docs/README.md`

## Key Considerations

1. **Expand home directory**: Replace `~` with actual user home directory in all paths

2. **Handle Kubernetes special case**: 
   - project-planton has `/kubernetes/{category}/{component}/`
   - planton-cloud has `/kubernetes/{component}/` (no category)
   - Search for component if you're unsure of category

3. **Research report must exist**: Fail gracefully if report.md not found
   - Explain where it should be
   - Suggest using `@generate-deployment-component-research-prompt.mdc` first

4. **Create directories as needed**: Never fail due to missing `docs/` folder

5. **Quality over speed**: This is documentation that will be read by many developers
   - Take time to craft engaging prose
   - Use analogies and examples from the research
   - Balance completeness with readability

6. **Timeless perspective**: Write as if this document has always existed
   - No "we just added..." or "in this conversation..."
   - Pure knowledge transfer

7. **Honest and grounded**: Never speculate
   - If research doesn't cover something, don't invent it
   - Be honest about trade-offs and limitations
   - Cite evidence from the research

## Success Criteria

A successful documentation file should:

✅ Be engaging enough that developers read it voluntarily, not out of obligation
✅ Explain the "why" behind deployment choices, not just the "what"
✅ Present deployment methods as a progression from basic to production-ready
✅ Make licensing and open-source considerations crystal clear
✅ Justify Project Planton's defaults with evidence from research
✅ Reference (but not include) exhaustive implementation details
✅ Be scannable (headings, tables, bold) yet rewarding to read deeply
✅ Sound like it was written by an experienced architect, not generated by a bot

---

**Remember**: You're not just reformatting research into documentation. You're teaching developers how to think about deploying this component, backed by grounded research and clear strategic reasoning. Make it a document they'll bookmark and share with colleagues.

