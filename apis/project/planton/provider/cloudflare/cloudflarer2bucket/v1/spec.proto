syntax = "proto3";

package project.planton.provider.cloudflare.cloudflarer2bucket.v1;

import "buf/validate/validate.proto";
import "project/planton/shared/options/options.proto";

// Supported Cloudflare R2 bucket regions (location hints).
enum CloudflareR2Location {
  CLOUDFLARE_R2_LOCATION_UNSPECIFIED = 0;
  WEUR = 1;  // Western Europe region
  ENW  = 2;  // Eastern North America region
  APE  = 3;  // Asia-Pacific East region
  USW  = 4;  // US West (Western North America) region
}

// CloudflareR2BucketSpec defines the user configuration for a Cloudflare R2 bucket.
message CloudflareR2BucketSpec {
  // bucket name (DNS-compatible, 3â€“63 characters)
  string bucket_name = 1 [
    (buf.validate.field).required = true,
    (buf.validate.field).string.pattern = "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$",
    (buf.validate.field).string.min_len = 3,
    (buf.validate.field).string.max_len = 63
  ];

  // primary region for the bucket (location hint)
  CloudflareR2Location location = 2 [
    (buf.validate.field).required = true
  ];

  // expose bucket via public URL (Cloudflare-managed r2.dev domain; default: false)
  bool public_access = 3;

  // enable object versioning for the bucket (default: false)
  bool versioning_enabled = 4;
}
