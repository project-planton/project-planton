apiVersion: kubernetes.project-planton.org/v1
kind: KubernetesGhaRunnerScaleSet
metadata:
  name: example-runners
spec:
  # Namespace configuration
  namespace:
    value: gha-runners
  createNamespace: true

  # Helm chart version
  helmChartVersion: "0.13.1"

  # GitHub configuration
  github:
    # Repository-level runners
    configUrl: https://github.com/myorg/myrepo
    # Use PAT token for authentication
    patToken:
      token: ghp_your_personal_access_token_here

  # Scaling configuration
  scaling:
    minRunners: 0  # Scale to zero when idle
    maxRunners: 5  # Maximum concurrent runners

  # Container mode - Docker-in-Docker
  containerMode:
    type: DIND

  # Runner container configuration
  runner:
    resources:
      requests:
        cpu: "500m"
        memory: "1Gi"
      limits:
        cpu: "2"
        memory: "4Gi"

  # Persistent volumes for caching
  persistentVolumes:
    - name: npm-cache
      size: "20Gi"
      mountPath: /home/runner/.npm
      storageClass: standard
    - name: gradle-cache
      size: "50Gi"
      mountPath: /home/runner/.gradle

