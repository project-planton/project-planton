# Overview

The OpenFGA Kubernetes Pulumi module is engineered to streamline the deployment of the OpenFGA service within Kubernetes environments. By adhering to a standardized API resource structure, the module accepts an `OpenFgaKubernetesStackInput` specification, which encompasses essential configurations such as container resources, replica counts, ingress settings, datastore configurations, and namespace management options. Upon execution, the module initializes necessary local variables and establishes a Kubernetes provider using the provided cluster credentials. 

Based on the `create_namespace` flag in the specification, the module either creates a new dedicated Kubernetes namespace or references an existing one, ensuring proper isolation and organization of the deployed resources. When `create_namespace` is set to `true`, the module provisions a new namespace with appropriate labels and metadata. When set to `false`, the module looks up and uses an existing namespace, supporting scenarios where namespace management is handled externally or shared across multiple components.

The module leverages Helm charts to install the OpenFGA service, configuring it with the specified container resources and replicas. Additionally, if ingress is enabled in the specification, the module sets up Istio ingress resources to manage external access, enhancing the service's accessibility and security.

Beyond deployment, the module captures and exports critical output parameters that facilitate seamless integration and operational management. These outputs include the namespace name, service name, port-forwarding commands for local access, Kubernetes and external endpoints, and hostname configurations for both internal and external clients. By encapsulating the deployment logic within this Pulumi module, developers can declaratively manage and deploy complex OpenFGA infrastructure across various cloud providers with ease and consistency. This powerful pattern not only simplifies the infrastructure provisioning process but also ensures scalability, maintainability, and adherence to best practices in multi-cloud environments.